{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\n// import data from '../../data.json';\n\n// const data1 = () => {\n// \tfetch('http://localhost:8000/restaurant/', {\n// \t\tmethod: 'GET',\n// \t})\n// \t\t.then((response) => response.json())\n// \t\t.then((data) => {\n// \t\t\treturn data;\n// \t\t})\n// \t\t.catch((err) => {\n// \t\t\tconsole.log(err.message);\n// \t\t});\n// };\n// // const newData: IRestaurants[] = data1();\n// export const restaurantsSlice = createSlice({\n// \tname: 'restaurants',\n// \tinitialState: {\n// \t\tvalue: data1(),\n// \t\tfilteredValue: data1(),\n// \t\t// filteredValue: data.restaurant,\n// \t},\n// \treducers: {\n// \t\tsetAllRestuarants: (state) => {\n// \t\t\tstate.filteredValue = data1();\n// \t\t},\n// \t\tsetPopularRestuarants: (state) => {\n// \t\t\tconst newData = await data1();\n// \t\t\tstate.filteredValue = [...newData].sort(\n// \t\t\t\t(a: any, b: any) => b.views - a.views\n// \t\t\t);\n// \t\t},\n\nconst data1 = async () => {\n  try {\n    const response = await fetch('http://localhost:8000/restaurant/', {\n      method: 'GET'\n    });\n    const data = await response.json();\n    return data;\n  } catch (err) {\n    console.log(err.message);\n    return [];\n  }\n};\nexport const restaurantsSlice = createSlice({\n  name: 'restaurants',\n  initialState: {\n    value: [],\n    filteredValue: []\n  },\n  reducers: {\n    setAllRestuarants: async state => {\n      state.filteredValue = await data1();\n    },\n    setPopularRestuarants: async state => {\n      const newData = await data1();\n      state.filteredValue = [...newData].sort((a, b) => b.views - a.views);\n    },\n    setNewRestuarants: state => {\n      state.filteredValue = newData.filter(restaurant => restaurant.newRest === true);\n    },\n    setOpenNow: (state, action) => {\n      state.filteredValue = action.payload;\n    },\n    setMap: state => {\n      state.filteredValue = data1();\n    }\n  }\n});\nexport const {\n  setAllRestuarants,\n  setOpenNow,\n  setMap,\n  setPopularRestuarants,\n  setNewRestuarants\n} = restaurantsSlice.actions;\nexport default restaurantsSlice.reducer;","map":{"version":3,"names":["createSlice","data1","response","fetch","method","data","json","err","console","log","message","restaurantsSlice","name","initialState","value","filteredValue","reducers","setAllRestuarants","state","setPopularRestuarants","newData","sort","a","b","views","setNewRestuarants","filter","restaurant","newRest","setOpenNow","action","payload","setMap","actions","reducer"],"sources":["C:/Users/hagar/bootcamp/finalepicure/frontend/src/store/slices/restaurantsSlice.tsx"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport { IRestaurants } from '../../components/RestaurantPage/RestaurantPage';\r\n// import data from '../../data.json';\r\n\r\n// const data1 = () => {\r\n// \tfetch('http://localhost:8000/restaurant/', {\r\n// \t\tmethod: 'GET',\r\n// \t})\r\n// \t\t.then((response) => response.json())\r\n// \t\t.then((data) => {\r\n// \t\t\treturn data;\r\n// \t\t})\r\n// \t\t.catch((err) => {\r\n// \t\t\tconsole.log(err.message);\r\n// \t\t});\r\n// };\r\n// // const newData: IRestaurants[] = data1();\r\n// export const restaurantsSlice = createSlice({\r\n// \tname: 'restaurants',\r\n// \tinitialState: {\r\n// \t\tvalue: data1(),\r\n// \t\tfilteredValue: data1(),\r\n// \t\t// filteredValue: data.restaurant,\r\n// \t},\r\n// \treducers: {\r\n// \t\tsetAllRestuarants: (state) => {\r\n// \t\t\tstate.filteredValue = data1();\r\n// \t\t},\r\n// \t\tsetPopularRestuarants: (state) => {\r\n// \t\t\tconst newData = await data1();\r\n// \t\t\tstate.filteredValue = [...newData].sort(\r\n// \t\t\t\t(a: any, b: any) => b.views - a.views\r\n// \t\t\t);\r\n// \t\t},\r\n\r\nconst data1 = async (): Promise<IRestaurants[]> => {\r\n\ttry {\r\n\t\tconst response = await fetch('http://localhost:8000/restaurant/', {\r\n\t\t\tmethod: 'GET',\r\n\t\t});\r\n\t\tconst data = await response.json();\r\n\t\treturn data;\r\n\t} catch (err) {\r\n\t\tconsole.log(err.message);\r\n\t\treturn [];\r\n\t}\r\n};\r\n\r\nexport const restaurantsSlice = createSlice({\r\n\tname: 'restaurants',\r\n\tinitialState: {\r\n\t\tvalue: [],\r\n\t\tfilteredValue: [],\r\n\t},\r\n\treducers: {\r\n\t\tsetAllRestuarants: async (state) => {\r\n\t\t\tstate.filteredValue = await data1();\r\n\t\t},\r\n\t\tsetPopularRestuarants: async (state) => {\r\n\t\t\tconst newData = await data1();\r\n\t\t\tstate.filteredValue = [...newData].sort(\r\n\t\t\t\t(a: any, b: any) => b.views - a.views\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tsetNewRestuarants: (state) => {\r\n\t\t\tstate.filteredValue = newData.filter(\r\n\t\t\t\t(restaurant) => restaurant.newRest === true\r\n\t\t\t);\r\n\t\t},\r\n\t\tsetOpenNow: (state, action) => {\r\n\t\t\tstate.filteredValue = action.payload;\r\n\t\t},\r\n\t\tsetMap: (state) => {\r\n\t\t\tstate.filteredValue = data1();\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const {\r\n\tsetAllRestuarants,\r\n\tsetOpenNow,\r\n\tsetMap,\r\n\tsetPopularRestuarants,\r\n\tsetNewRestuarants,\r\n} = restaurantsSlice.actions;\r\n\r\nexport default restaurantsSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAE9C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,KAAK,GAAG,YAAqC;EAClD,IAAI;IACH,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,mCAAmC,EAAE;MACjEC,MAAM,EAAE;IACT,CAAC,CAAC;IACF,MAAMC,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAI,EAAE;IAClC,OAAOD,IAAI;EACZ,CAAC,CAAC,OAAOE,GAAG,EAAE;IACbC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,OAAO,CAAC;IACxB,OAAO,EAAE;EACV;AACD,CAAC;AAED,OAAO,MAAMC,gBAAgB,GAAGX,WAAW,CAAC;EAC3CY,IAAI,EAAE,aAAa;EACnBC,YAAY,EAAE;IACbC,KAAK,EAAE,EAAE;IACTC,aAAa,EAAE;EAChB,CAAC;EACDC,QAAQ,EAAE;IACTC,iBAAiB,EAAE,MAAOC,KAAK,IAAK;MACnCA,KAAK,CAACH,aAAa,GAAG,MAAMd,KAAK,EAAE;IACpC,CAAC;IACDkB,qBAAqB,EAAE,MAAOD,KAAK,IAAK;MACvC,MAAME,OAAO,GAAG,MAAMnB,KAAK,EAAE;MAC7BiB,KAAK,CAACH,aAAa,GAAG,CAAC,GAAGK,OAAO,CAAC,CAACC,IAAI,CACtC,CAACC,CAAM,EAAEC,CAAM,KAAKA,CAAC,CAACC,KAAK,GAAGF,CAAC,CAACE,KAAK,CACrC;IACF,CAAC;IAEDC,iBAAiB,EAAGP,KAAK,IAAK;MAC7BA,KAAK,CAACH,aAAa,GAAGK,OAAO,CAACM,MAAM,CAClCC,UAAU,IAAKA,UAAU,CAACC,OAAO,KAAK,IAAI,CAC3C;IACF,CAAC;IACDC,UAAU,EAAE,CAACX,KAAK,EAAEY,MAAM,KAAK;MAC9BZ,KAAK,CAACH,aAAa,GAAGe,MAAM,CAACC,OAAO;IACrC,CAAC;IACDC,MAAM,EAAGd,KAAK,IAAK;MAClBA,KAAK,CAACH,aAAa,GAAGd,KAAK,EAAE;IAC9B;EACD;AACD,CAAC,CAAC;AAEF,OAAO,MAAM;EACZgB,iBAAiB;EACjBY,UAAU;EACVG,MAAM;EACNb,qBAAqB;EACrBM;AACD,CAAC,GAAGd,gBAAgB,CAACsB,OAAO;AAE5B,eAAetB,gBAAgB,CAACuB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}